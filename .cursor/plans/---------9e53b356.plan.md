<!-- 9e53b356-7d66-4ab0-9603-936d1c694d15 d09a96bb-536b-4ede-a6a8-24ec16add099 -->
# 分离二叉树节点间距参数

## 目标

将单一的 `min_spacing` 参数分离为两个独立参数：

- `min_spacing=100`：控制最终显示的节点间距（静态间距）
- `layout_spacing=40`：控制布局计算时的间距（影响节点移动幅度）

## 实施步骤

### 1. 修改 BinaryTreeAdapter 类

**文件**: `controllers/adapters.py`

#### 1.1 修改 `_calculate_subtree_width` 方法（第991行）

- 添加 `layout_spacing` 参数
- 将第1009行的 `min_spacing` 改为 `layout_spacing`
- 新签名：`def _calculate_subtree_width(node, node_width=60, layout_spacing=40)`

#### 1.2 修改 `_layout_tree` 方法（第1014行）

- 添加 `min_spacing` 和 `layout_spacing` 两个参数
- 第1037行改为：`total_child_width = left_width + right_width + min_spacing`（移除1.5倍数）
- 第1052行改为：`left_center = center_x - layout_spacing / 2`
- 第1059行改为：`right_center = center_x + layout_spacing / 2`
- 递归调用时传递两个参数
- 新签名：`def _layout_tree(node, center_x, y, level_height=80, node_width=60, min_spacing=100, layout_spacing=40)`

#### 1.3 修改 `to_snapshot` 方法（第1120行）

- 添加两个参数
- 调用 `_layout_tree` 时传递两个参数
- 新签名：`def to_snapshot(binary_tree, start_x=400, y=100, level_height=80, node_width=60, min_spacing=100, layout_spacing=40)`

### 2. 修改 BSTAdapter 类

**文件**: `controllers/adapters.py`

#### 2.1 修改 `_calculate_subtree_width` 方法（第1286行）

- 与 BinaryTreeAdapter 相同的修改
- 第1304行的 `min_spacing*1.5` 改为 `layout_spacing`

#### 2.2 修改 `_layout_tree` 方法（第1309行）

- 与 BinaryTreeAdapter 相同的修改
- 第1332行改为：`total_child_width = left_width + right_width + min_spacing`
- 第1347行改为：`left_center = center_x - layout_spacing / 2`
- 第1354行改为：`right_center = center_x + layout_spacing / 2`

#### 2.3 修改 `to_snapshot` 方法（第1415行）

- 与 BinaryTreeAdapter 相同的修改

## 关键变化

- **min_spacing=100**：控制节点间的最终显示距离（更宽的间距）
- **layout_spacing=40**：控制子树宽度计算时的间距（减少移动幅度）
- 移除第1037行和1332行的 `* 1.5` 倍数，直接使用 `min_spacing`

## 预期效果

- 节点间的视觉间距：100像素（更宽）
- 添加新节点时的移动幅度：基于40像素计算（更小）
- 两个参数独立控制，互不干扰

### To-dos

- [ ] 修改BinaryTreeAdapter._calculate_subtree_width方法，添加layout_spacing参数
- [ ] 修改BinaryTreeAdapter._layout_tree方法，分离min_spacing和layout_spacing
- [ ] 修改BinaryTreeAdapter.to_snapshot方法，传递两个间距参数
- [ ] 修改BSTAdapter._calculate_subtree_width方法，添加layout_spacing参数
- [ ] 修改BSTAdapter._layout_tree方法，分离min_spacing和layout_spacing
- [ ] 修改BSTAdapter.to_snapshot方法，传递两个间距参数
- [ ] 测试修改后的效果，验证节点间距和移动幅度